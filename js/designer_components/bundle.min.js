var _=/[a-zA-Z%]/g,r=class{constructor(t,e,i){this.domNode=t;this.pyComponent=e;this.el=i;this.domNode=t,this.pyComponent=e,this.el=i}static postLoad(){}static init(t,e="anvil-extras-designer"){let i=()=>{this.loading=!0,$(()=>{this.setup(t,e),this.postLoad(),this.loaded=!0,this.loading=!1})};if(!this.loaded&&!this.loading){if(this.loading=!0,this.links.forEach(s=>{let n=document.createElement("link");n.href=s,n.rel="stylesheet",document.body.appendChild(n)}),this.css){let s=document.createElement("style");s.innerHTML=this.css,document.body.appendChild(s)}if(this.scripts.length){let s=this.scripts.map(n=>new Promise((a,c)=>{let o=document.createElement("script");o.src=n,document.body.appendChild(o),o.onload=a,o.onerror=c}));Promise.all(s).then(i)}else i()}else this.loading||i()}static setup(t,e){for(let i of document.querySelectorAll(t)){let s=i.parentElement;if(s.classList.contains(e))return;s.classList.add(e);let n=$(s).data("anvilPyComponent"),a;try{a=n._anvil.customPropVals}catch(o){console.error(o);return}let c=new this(s,n,i);if(a)c.makeGetSets(a);else if(this.defaults){c.update({...this.defaults});for(let[o,d]of Object.entries(this.defaults))c.setProp(o,d,this.defaults)}}}makeGetSets(t){let e={...t},i=this;this.update({...e});for(let s in e)this.setProp(s,t[s],e),Object.defineProperty(t,s,{get(){return e[s]},set(n){e[s]=n;try{i.setProp(s,n,e),i.update({...e},s,n)}catch{}return!0}})}update(t,e,i){}setProp(t,e,i){}updateSpacing({spacing_above:t,spacing_below:e}){let i=Array.prototype.filter.call(this.domNode.classList,s=>s.startsWith("anvil-spacing-"));this.domNode.classList.remove(...i),t&&this.domNode.classList.add("anvil-spacing-above-"+t),e&&this.domNode.classList.add("anvil-spacing-above-"+e)}updateRole({role:t}){let e=Array.prototype.filter.call(this.domNode.classList,i=>i.startsWith("anvil-role-"));this.domNode.classList.remove(...e),t&&this.domNode.classList.add("anvil-role-"+t)}updateVisible({visible:t}){this.domNode.classList.toggle("visible-false",!t)}getColor(t,e){return t&&t.startsWith("theme:")&&(t=window.anvilThemeColors[t.replace("theme:","")]||""),!t&&e?e===!0||e==="primary"?window.anvilThemeColors["Primary 500"]||"#2196F3":e:t}getColorRGB(t,e){if(t=this.getColor(t,e),t&&t.startsWith("#")){let i=parseInt(t.slice(1),16);return[i>>16&255,i>>8&255,i&255].join(",")}else if(t&&t.startsWith("rgb("))return t.slice(4,t.length-1);return t}getCssLength(t){return t??="",(""+t).match(_)?t:t+"px"}clearElement(t){for(;t.firstElementChild;)t.removeChild(t.firstElementChild)}get[Symbol.toStringTag](){return"Designer Component"}};r.css="",r.links=[],r.scripts=[],r.loaded=!1,r.loading=!1,r.defaults=null,r.initializing=!1;var b=class extends r{static postLoad(){$.fn.selectpicker.Constructor.BootstrapVersion="3"}static init(){super.init(".select-picker")}constructor(t,e,i){super(t,e,i);this.picker=$(i),this.picker.selectpicker()}update(t,e){e&&!(e in this.constructor.defaults)||(this.picker.attr("title",t.placeholder||null),this.picker.selectpicker({title:t.placeholder}),this.picker.data("width",t.width),this.picker.attr("disabled",t.enabled?null:""),this.updateSpacing(t),this.updateVisible(t),this.picker.selectpicker("refresh"),this.picker.selectpicker("render"))}get[Symbol.toStringTag](){return"MultiSelectDropDown"}};b.defaults={placeholder:"None Selected",enabled:!0,visible:!0,width:"",spacing_above:"small",spacing_below:"small"},b.links=["https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.18/dist/css/bootstrap-select.min.css"],b.scripts=["https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.18/dist/js/bootstrap-select.min.js"];var u=class extends r{static init(){super.init(".quill-editor")}constructor(t,e,i){super(t,e,i);this.editor=i}update(t){this.editor.firstElementChild&&this.editor.removeChild(this.editor.firstElementChild),this.domNode.firstElementChild!==this.editor&&this.domNode.removeChild(this.domNode.firstElementChild);let e=new Quill(this.editor,{modules:{toolbar:t.toolbar||!1},readOnly:t.readonly,theme:t.theme,placeholder:t.placeholder});this.updateSpacing(t),this.updateVisible(t);let i=t.height;i=(""+i).match(/[a-zA-Z%]/g)?i:i+"px",this.editor.style.minHeight=i,this.editor.style.height=t.auto_expand?i:"auto",e.setText(t.content||"")}get[Symbol.toStringTag](){return"Quill"}};u.defaults={auto_expand:!0,content:"",height:150,placeholder:null,readonly:!1,theme:"snow",toolbar:!0,visible:!0},u.links=["//cdn.quilljs.com/1.3.6/quill.snow.css","//cdn.quilljs.com/1.3.6/quill.bubble.css"],u.scripts=["//cdn.quilljs.com/1.3.6/quill.min.js"];var C="--slider-bar-color",k="--slider-height",m="--slider-handle-size",p=class extends r{static init(){super.init(".anvil-slider","anvil-slider-container")}constructor(t,e,i){super(t,e,i);this.slider=i}parse(t,e=!1){if(typeof t!="string")return t;if(t=t.toLowerCase().trim(),!t)return e?[]:null;try{return JSON.parse((e||t.includes(","))&&t[0]!=="["?`[${t}]`:t)}catch{return e?[]:t}}getFormatter(t){let e=t.indexOf("{"),i=t.indexOf("}"),s=e===-1?"":t.slice(0,e),n=i===-1?"":t.slice(i+1),a=t[i-1]==="%"?"%":null,c=Sk.ffi.toPy(t),o=c.tp$getattr(Sk.ffi.toPy("format")),d=l=>{let g=Sk.ffi.toPy(l);return e===-1?Sk.builtin.format(g,c):o.tp$call([g])};try{d(1.1)}catch(l){throw new Error(l.toString())}return{to:l=>{try{return d(l)}catch{return l}},from:l=>{l.startsWith(s)&&(l=l.slice(s.length)),l.endsWith(n)&&(l=l.slice(0,l.length-n.length));let g=a==="%"&&l.endsWith("%");l=l.trim().replace(/[,_]/g,"");let y=parseFloat(l);return g&&(y=y/100),y}}}update(t){try{for(let s of["start","connect","margin","padding","limit","pips_values"])t[s]=this.parse(t[s],s==="pips_values");t.range={min:t.min,max:t.max},t.format=this.getFormatter(t.format||".2f"),t.pips&&(t.pips={format:t.format,mode:t.pips_mode,values:t.pips_values,density:t.pips_density,stepped:t.pips_stepped}),this.domNode.classList.toggle("has-pips",!!t.pips),this.slider.noUiSlider?.destroy(),this.slider.firstElementChild&&this.slider.removeChild(this.slider.firstElementChild),this.domNode.style.setProperty(C,this.getColor(t.color,!0)),this.updateSpacing(t),this.updateVisible(t),this.updateRole(t);let e=this.getCssLength(t.bar_height||18),i=this.getCssLength(t.handle_size||34);this.domNode.style.setProperty(k,e),this.domNode.style.setProperty(m,i),t.enabled?this.slider.removeAttribute("disabled"):this.slider.setAttribute("disabled",""),noUiSlider.create(this.slider,t)}catch(e){this.slider.noUiSlider?.destroy(),this.slider.firstElementChild&&this.slider.removeChild(this.slider.firstElementChild);let i=$(`<div class='invalid-component'>
              <i class="glyphicon glyphicon-remove"></i>
              <div class="err">${e.message.replaceAll("noUiSlider","Slider")}</div></div>`);this.slider.appendChild(i[0])}}get[Symbol.toStringTag](){return"Slider"}};p.defaults={start:[20,80],connect:!0,min:0,max:100,visible:!0,enabled:!0},p.links=["https://cdn.jsdelivr.net/npm/nouislider@15.4.0/dist/nouislider.css"],p.scripts=["https://cdn.jsdelivr.net/npm/nouislider@15.4.0/dist/nouislider.js"],p.css=`.anvil-slider-container{padding:10px 0}.anvil-slider-container.has-pips{padding-bottom:40px}
    .anvil-container-overflow,.anvil-panel-col{overflow:visible}.noUi-connect{background:var(${C})}
    .noUi-horizontal{height:var(${k})}
    .noUi-horizontal .noUi-handle{width:var(${m});height:var(${m});right:calc(var(${m}) / -2);top:calc((-2px + var(${k}) - var(${m}))/2);border-radius:50%}
    .noUi-handle::after,.noUi-handle::before{content:none}`;var w=class extends r{static init(){super.init(".anvil-extras-switch")}constructor(t,e,i){super(t,e,i);let s=e._anvil.components[0].component,n=s._anvil.domNode;n.classList.add("switch"),n.style.setProperty("--color",this.getColorRGB("#2196F3"));let a=n.querySelector("span");a.classList.add("lever"),a.removeAttribute("style");let c=n.querySelector("label"),o=document.createTextNode(""),d=document.createTextNode("");c.prepend(o),c.append(d),c.style.padding="7px 0",this.cb=s,this.cbNode=n,this.textNodePre=o,this.textNodePost=d}setProp(t,e,i){try{this.cb._anvil.setProp(t,Sk.ffi.toPy(e))}catch(s){t==="checked_color"?this.cbNode.style.setProperty("--color",this.getColorRGB(e,!0)):t==="text_pre"?this.textNodePre.textContent=e:this.textNodePost.textContent=e}}get[Symbol.toStringTag](){return"Switch"}};w.css=`
.switch,.switch *{-webkit-tap-highlight-color:transparent;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
.switch label{cursor:pointer}
.switch label input[type=checkbox]{opacity:0;width:0;height:0}.switch label input[type=checkbox]:checked+.lever{background-color:rgba(var(--color), .5)}
.switch label input[type=checkbox]:checked+.lever:after,.switch label input[type=checkbox]:checked+.lever:before{left:18px}
.switch label input[type=checkbox]:checked+.lever:after{background-color:rgb(var(--color))}
.switch label .lever{content:"";display:inline-block;position:relative;width:36px;height:14px;background-color:rgba(0,0,0,0.38);border-radius:15px;margin-right:10px;-webkit-transition:background 0.3s ease;transition:background 0.3s ease;vertical-align:middle;margin:0 16px}
.switch label .lever:after,.switch label .lever:before{content:"";position:absolute;display:inline-block;width:20px;height:20px;border-radius:50%;left:0;top:-3px;-webkit-transition:left 0.3s ease, background 0.3s ease, -webkit-box-shadow 0.1s ease, -webkit-transform 0.1s ease;transition:left 0.3s ease, background 0.3s ease, -webkit-box-shadow 0.1s ease, -webkit-transform 0.1s ease;transition:left 0.3s ease, background 0.3s ease, box-shadow 0.1s ease, transform 0.1s ease;transition:left 0.3s ease, background 0.3s ease, box-shadow 0.1s ease, transform 0.1s ease, -webkit-box-shadow 0.1s ease, -webkit-transform 0.1s ease}
.switch label .lever:before{background-color:rgb(var(--color), 0.15)}
.switch label .lever:after{background-color:#F1F1F1;-webkit-box-shadow:0 3px 1px -2px rgba(0,0,0,0.2),0px 2px 2px 0 rgba(0,0,0,0.14),0px 1px 5px 0 rgba(0,0,0,0.12);box-shadow:0 3px 1px -2px rgba(0,0,0,0.2),0px 2px 2px 0 rgba(0,0,0,0.14),0px 1px 5px 0 rgba(0,0,0,0.12)}
input[type=checkbox]:checked:not(:disabled) ~ .lever:active::before,input[type=checkbox]:checked:not(:disabled).tabbed:focus ~ .lever::before{-webkit-transform:scale(2.4);transform:scale(2.4);background-color:rgb(var(--color), 0.15)}
input[type=checkbox]:not(:disabled) ~ .lever:active:before,input[type=checkbox]:not(:disabled).tabbed:focus ~ .lever::before{-webkit-transform:scale(2.4);transform:scale(2.4);background-color:rgba(0,0,0,0.08)}
.switch input[type=checkbox][disabled]+.lever{cursor:default;background-color:rgba(0,0,0,0.12)}
.switch label input[type=checkbox][disabled]+.lever:after,.switch label input[type=checkbox][disabled]:checked+.lever:after{background-color:#949494}`;var f=class extends r{static init(){super.init(".anvil-container .tabs","anvil-extras-designer")}constructor(t,e,i){super(t,e,i);this.tabs=i,this.domNode.style.paddingTop="0",this.domNode.style.paddingBottom="0"}update(t){this.clearElement(this.tabs);let e={offsetLeft:0,offsetWidth:0};t.tab_titles||=[],t.tab_titles.forEach((a,c)=>{let o=document.createElement("li");o.className="tab";let d=document.createElement("a");d.style.cssText=`
			font-weight:${t.bold?"bold":""};
			text-align: ${t.align};
			font-size: ${t.font_size?t.font_size+"px":""};
			font-family:${t.font||""};
			font-style: ${t.italic?"italic":""};
			`,d.textContent=a,o.appendChild(d),this.tabs.appendChild(o),c===t.active_tab_index&&(d.className="active",e=o)});let i=document.createElement("li");this.tabs.appendChild(i),i.className="indicator",i.style.left=e.offsetLeft+"px",i.style.right=this.tabs.offsetWidth-e.offsetLeft-e.offsetWidth+"px";let s=this.getColorRGB(t.foreground,!0);this.tabs.style.setProperty("--color",s);let n=this.getColor(t.background);this.tabs.style.setProperty("--background",n),this.updateSpacing(t),this.updateRole(t),this.updateVisible(t)}get[Symbol.toStringTag](){return"Tabs"}};f.defaults={tab_titles:["Tab 1","Tab 2"],active_tab_index:0,visible:!0,align:"left"},f.css=".anvil-extras-tabs.anvil-role-card{border-bottom-left-radius:0;border-bottom-right-radius:0;margin-bottom:-1px}.tabs{position:relative;overflow-x:auto;overflow-y:hidden;height:48px;width:100%;background-color:var(--background, inherit);margin:0 auto;white-space:nowrap;padding:0;display:flex;z-index:1}.tabs .tab{flex-grow:1;display:inline-block;text-align:center;line-height:48px;height:48px;padding:0;margin:0;text-transform:uppercase}.tabs .tab a{color:rgba(var(--color),0.7);display:block;width:100%;height:100%;padding:0 24px;font-size:14px;text-overflow:ellipsis;overflow:hidden;-webkit-transition:color 0.28s ease, background-color 0.28s ease;transition:color 0.28s ease, background-color 0.28s ease}.tabs .tab a:focus,.tabs .tab a:focus.active{background-color:rgb(var(--color), 0.2);outline:none}.tabs .tab a.active,.tabs .tab a:hover{background-color:transparent;color:rgb(var(--color))}.tabs .indicator{position:absolute;bottom:0;height:3px;background-color:rgb(var(--color), 0.4);will-change:left, right}";var x=class extends r{static init(){super.init(".chip-placeholder","anvil-extras-chip")}constructor(t,e,i){super(t,e,i);i.remove(),this.label=e._anvil.components[0].component,this.link=e._anvil.components[1].component,this.linkNode=this.link._anvil.domNode,this.linkNode.classList.remove("anvil-container")}setProp(t,e,i){switch(t){case"visible":this.updateVisible(i);break;case"spacing_above":case"spacing_below":this.updateSpacing(i);break;case"text":case"icon":this.label._anvil.setPropJS(t,e);break;case"foreground":this.link._anvil.setPropJS(t,e||"rgba(0,0,0,0.6)"),this.label._anvil.setPropJS(t,e||"rgba(0,0,0,0.6)");break;case"close_icon":this.linkNode.style.display=e?"block":"none";break;case"background":this.pyComponent._anvil.setPropJS(t,e);break}}get[Symbol.toStringTag](){return"Chip"}};x.css=".anvil-extras-chip{height:32px;font-size:14px;font-weight:500;color:rgba(0,0,0,0.6);line-height:32px;padding:0 12px;border-radius:16px;background-color:#e4e4e4;cursor:pointer;display:flex;gap:14px;align-items:center;width:fit-content;padding-left:12px;padding-right:12px}.anvil-extras-chip i.anvil-component-icon.left{font-size:1.5rem}.anvil-extras-chip a{user-select:none}.anvil-extras-chip a .link-text{}.anvil-extras-chip span{padding:0 !important}";var S=class extends r{static init(){x.init(),super.init(".chips-input-placeholder","anvil-extras-chips-input")}constructor(t,e,i){super(t,e,i);i.remove();let s=e._anvil.components[0].component;this.chipNode=s._anvil.domNode,this.input=e._anvil.components[1].component,this.inputNode=this.input._anvil.domNode,this.chips=[],Sk.misceval.callsimArray(s.tp$getattr(new Sk.builtin.str("remove_from_parent")))}setProp(t,e,i){switch(t){case"chips":debugger;e=Array.from(new Set((e||[]).filter(s=>s))),this.chips.forEach(s=>this.domNode.removeChild(s)),this.chips=[],e.forEach((s,n)=>{let a=this.chipNode.cloneNode(!0);a.querySelector("span").textContent=s,this.chips.push(a),this.domNode.insertBefore(a,this.inputNode)}),this.chips.length?this.input._anvil.setPropJS("placeholder",i.secondary_placeholder):this.input._anvil.setPropJS("placeholder",i.primary_placeholder);break;case"spacing_above":case"spacing_below":this.updateSpacing(i);break;case"visible":this.updateVisible(i);break;case"primary_placeholder":!this.chips.length&&this.input._anvil.setPropJS("placeholder",e);break;case"secondary_placeholder":this.chips.length&&this.input._anvil.setPropJS("placeholder",e);break}}get[Symbol.toStringTag](){return"ChipsInput"}};S.css=".anvil-extras-chips-input input{box-shadow:none !important;border:none !important;padding:7px 0 !important;margin-bottom:0 !important;flex:1;min-width:50px}.anvil-extras-chips-input{display:flex;flex-wrap:wrap;gap:8px;border-bottom:1px solid;align-items:center;padding-bottom:4px}";var v=class extends r{static init(){super.init(".pivot-placeholder")}constructor(t,e,i){super(t,e,i);this.pivot=$(t.querySelector(".anvil-extras-pivot"))}update({rows:t,columns:e,values:i,aggregator:s}){let n=[...t,...e,...i,"key A","key B","key C"],a=Object.fromEntries(n.map(c=>[c,1]));this.pivot.pivotUI([a],{rows:t,cols:e,vals:i,aggregatorName:s},!0)}};v.links=["https://cdnjs.cloudflare.com/ajax/libs/pivottable/2.23.0/pivot.min.css"],v.scripts=["https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js","https://cdnjs.cloudflare.com/ajax/libs/pivottable/2.23.0/pivot.min.js"];export{x as DesignerChip,S as DesignerChipsInput,r as DesignerComponent,b as DesignerMultiSelectDropDown,v as DesignerPivot,u as DesignerQuill,p as DesignerSlider,w as DesignerSwitch,f as DesignerTabs};
